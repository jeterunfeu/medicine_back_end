<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
    
<mapper namespace="net.softsociety.mra.dao.MedicineDAO">

	<select id="selectAll" resultType="Medicine">
		select * from medicine order by mednum desc
	</select>
	
	<select id="selectOne" parameterType="int" resultType="Medicine">
		select * from medicine where mednum = #{mednum}
	</select>
	
	<insert id="insertMedicine" parameterType="Medicine">
		insert into medicine
			mednum
			, medname
			, medco
			, price
			<if test="takemed != null">
			, takemed
			</if>
			, medcycle
			<if test="ingredient != null">
			, ingredient
			</if>
			, note
		values (
			 medicine_seq.nextval
			, #{medname}
			, #{medco}
			, #{price}
			<if test="takemed != null">
			, #{takemed}
			</if>
			, #{medcycle}
			<if test="ingredient != null">
			, #{ingredient}
			</if>
			, #{note}
		)
	</insert>
	
	<update id="updateMedicine" parameterType="int">
		update medicine set
			medname = #{medname}
			, medco = #{medco}
			, price = #{price}
			<if test="takemed != null">
			, takemed = #{takemed}
			</if>
			, medcycle = #{medcycle}
			<if test="ingredient != null">
			, ingredient = #{ingredient}
			</if>
			, note = #{note}
		where
			mednum = #{mednum} 
	</update>
	
	<delete id="deleteMedicine" parameterType="int">
		delete 
			from medicine
		where
			mednum = #{mednum}
	</delete>

</mapper>